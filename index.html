<html>

<head>
    <title>Restaurant</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css" />
</head>

<body>
    <h1>Restaurant</h1>

    <div id="start">
        <label for="user_name">Your name:</label>
        <input type="text" id="user_name" /><br />

        <button onclick="showMeal()">
            Meal
        </button>
    </div>

    <div id="meal" style="display: none;">
        <div id="entree">
            <h5>Entree</h5>
            <label for="ent1">Ent 1</label>
            <input type="radio" name="ent" id="ent1" value="ent_1" />
            <label for="ent2">Ent 2</label>
            <input type="radio" name="ent" id="ent2" value="ent_2" />
        </div>

        <div id="main course">
            <h5>Main course</h5>
            <label for="mc1">Mc 1</label>
            <input type="radio" name="mc" id="mc1" value="mc_1" />
            <label for="mc2">Mc 2</label>
            <input type="radio" name="mc" id="mc2" value="mc_2" />
        </div>

        <div id="dessert">
            <h5>Dessert</h5>
            <label for="dess1">Dess 1</label>
            <input type="radio" name="dessert" id="dess1" value="dess_1" />
            <label for="dess1">Dess 1</label>
            <input type="radio" name="dessert" id="dess2" value="dess_2" />
        </div>

        <button onclick="choiceCompleted()">Done</button>
    </div>

    <!-- Result -->

    <div id="div_result" style="display: none;">
        Hi <span id="name_span">t</span>, you chose
        <span id="ent_span"></span><br>,
        <span id="mc_span"></span><br> and
        <span id="dess_span"></span><br />. <br />
        Sit on the chair <span id="chair_number"></span>
    </div>

    <script>
        function choiceCompleted() {
            //document.write("test");
            resD = document.getElementById("div_result");
            resD.style.display = "block";

            mealDiv = document.getElementById("meal");
            mealDiv.style.display = "none";

            var us_name = document.getElementById("user_name").value;

            document.getElementById("name_span").textContent = us_name;

            document.getElementById("ent_span").textContent = "ent";
            document.getElementById("mc_span").textContent = "mc";
            document.getElementById("dess_span").textContent = "dess";

            document.getElementById("chair_number").textContent = getRandomInt(1, 50);
        }

        function showMeal() {
            mealDiv = document.getElementById("meal");
            mealDiv.style.display = "block";

            document.getElementById("start").style.display = "none";
        }

        /**
         * From https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Math/random
         */
        function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min)) + min;
        }

        function addContact() {
            nameField = document.getElementById("name_field");
            numberField = document.getElementById("number_field");
            req = new XMLHttpRequest();
            req.onreadystatechange = function () {
                console.log("orsc. s: " + req.readyState);
                if (req.readyState === 4 && req.status === 200) {
                    console.log("rs 4");

                    nameField.value = "";
                    numberField.value = "";

                    document.getElementById("cont_suc_alert").style.
                        display = "block";
                    window.setTimeout(function () {
                        hideNofifyContAdded();
                    }, 3000);

                    downloadContacts();
                }
            };
            req.open("POST", "http://127.0.0.1:3000/new_contact", true);
            var newCont = {
                id: '', name: nameField.value,
                number: numberField.value
            };
            req.setRequestHeader("Content-Type", "application/json");
            req.send(JSON.stringify(newCont));

        }

        function hideNofifyContAdded() {
            console.log("hiding");
            document.getElementById("cont_suc_alert").style.
                display = "none";
        }
    </script>
</body>

</html>